<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Text Translator with Image OCR</title>
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js"></script>
<style>
body {
font-family: Arial, sans-serif;
text-align: center;
background-color: #add8e6;
padding: 20px;
}
h2 {
color: #333;
}
input, textarea, select, button {
margin: 10px;
padding: 10px;
border-radius: 5px;
border: 1px solid #ccc;
font-size: 16px;
}
button {
background-color: #007bff;
color: white;
border: none;
cursor: pointer;
}
button:hover {
background-color: #0056b3;
}
#outputText {
font-weight: bold;
font-size: 18px;
margin-top: 20px;
color: #007bff;
}
.container {
background: white;
padding: 20px;
border-radius: 10px;
box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
display: inline-block;
margin-top: 20px;
}
</style>
</head>
<body>
<div class="container">
<h2>Translate Text</h2>
<input type="file" accept="image/*" id="imageInput" />
<button onclick="extractText()">Extract Text</button>
<br>
<textarea id="inputText" placeholder="Extracted text will appear here..." rows="4" 
cols="50"></textarea>
<br>
<select id="language">
<option value="en">English</option>
<option value="te">Telugu</option>
<option value="hi">Hindi</option>
<option value="bn">Bengali</option>
<option value="ta">Tamil</option>
<option value="mr">Marathi</option>
<option value="gu">Gujarati</option>
<option value="kn">Kannada</option>
<option value="ml">Malayalam</option>
<option value="pa">Punjabi</option>
<option value="or">Odia</option>
</select>
<button onclick="translateText()">Translate</button>
<button onclick="speakText()">Speak</button>
<h3>Translated Text:</h3>
<p id="outputText"></p>
</div>
<script>
function extractText() {
let input = document.getElementById('imageInput');
if (!input.files.length) {
alert('Please upload an image.');
return;
}
let file = input.files[0];
let reader = new FileReader();
reader.onload = function(event) {
let img = new Image();
img.src = event.target.result;
img.onload = function() {
Tesseract.recognize(img, 'eng', { logger: (m) => console.log(m) })
.then(({ data: { text } }) => {
document.getElementById('inputText').value = text;
translateText();
});
};
};
reader.readAsDataURL(file);
}
function translateText() {
    let text = document.getElementById("inputText").value;
    let targetLang = document.getElementById("language").value;

    let url = `https://translate.googleapis.com/translate_a/single?client=gtx&sl=en&tl=${targetLang}&dt=t&q=${encodeURIComponent(text)}`;

    fetch(url)
        .then(response => response.json())
        .then(data => {
            let translatedText = data[0].map(item => item[0]).join("");
            document.getElementById("outputText").innerText = translatedText;
        })
        .catch(error => console.error('Error:', error));
}

function speakText() {
let text = document.getElementById("outputText").innerText;
let lang = document.getElementById("language").value;
let utterance = new SpeechSynthesisUtterance(text);
utterance.lang = lang;
utterance.rate = 0.9; // Slower rate for clarity
utterance.pitch = 1;
utterance.volume = 1;
let voices = window.speechSynthesis.getVoices();
let selectedVoice = voices.find(voice => voice.lang.startsWith(lang));
if (selectedVoice) {
utterance.voice = selectedVoice;
}
window.speechSynthesis.speak(utterance);
}
window.speechSynthesis.onvoiceschanged = function() {
let lang = document.getElementById("language").value;
let voices = window.speechSynthesis.getVoices();
let selectedVoice = voices.find(voice => voice.lang.startsWith(lang));
if (selectedVoice) {
document.getElementById("outputText").dataset.voice = selectedVoice.name;
}
};
</script>
</body>
</html>